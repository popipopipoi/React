<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01_state-basic</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        /* state
        : state는 컴포넌트 내부에서 바뀔 수 있는 값을 의미한다.
          props는 부모 컴포넌트가 설정하는 값이지만, state는 컴포넌트 내부에서 설정되는 값이다. 
          props는 읽기 전용으로 사용되지만, state는 변경 되는 값을 관리한다. 
          
          클래스형 컴포넌트에서는 state를 직접 사용할 수 있다.
          함수형 컴포넌트에서는 useState라는 hooks로 별도로 기능을 제공하고 있다. 
          */

          class Counter extends React.Component {

            /* 컴포넌트를 생성할 때 가장 먼저 호출 되는 생성자 함수이다. */
            constructor(props) {

                /* 부모 컴포넌트로부터 전달 받은 props를 부모 클래스의 생성자에 전달하면서
                컴포너트를 생성한다. */
                super(props);

                /* state를 초기화 한다. 
                state는 생성자 안에서 초기화 하는 경우 this. 을 반드시 붙어야 한다. 
                또한 이름을 state로 작성해야 하며,
                state에 저장 되는 값의 형태는 반드시 Object 리터럴 형태로 작성한다. */
                this.state = {
                    number : 0,
                    test : 'hello'
                };  // React.Component에 state 들어있다.

            }

            render() {

                /* state에 저장 된 number 상태 값을 구조분해할당을 이용해서 저장 */
                const { number } = this.state;

                /* state의 값을 변경하기 위해서는 setState 함수를 이용해야 한다. 
                새로운 상태 값을 가지고 있는 Object를 동일한 키로 설정하여 인자를 전달하면,
                state 객체를 덮어쓰게 된다. 
                기존 state에 여러 값들이 있다고 해도 동일한 키를 가진 값만 덮어 쓰게 된다. */
                console.log(this.state);
                
                return (
                    <>
                        <h1 style={ number < 0 ? { color : 'red' } : { color : 'blue' } }>
                        Count : { number }
                        </h1>
                        <button 
                            onClick={ () => this.setState({ number : number - 1}) }
                        >
                            -1
                        </button>
                        <button
                            onClick={ () => this.setState({ number : number + 1}) }
                        >
                            +1
                        </button>
                    </>
                );
            }
          }
        
        ReactDOM.createRoot(document.getElementById('root')).render(
            <Counter/>
        );
    </script>
    
</body>
</html>